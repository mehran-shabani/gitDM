# پیشنهادهای عملی برای GitDM

1) تقویت مالکیت داده در ویوسِت‌ها (اعمال شد)
- محدودسازی `get_queryset` و بررسی مجوز در ایجاد رکورد برای `encounters`، `labs` و `meds` بر اساس `primary_doctor` یا `created_by`.

2) غنی‌سازی و امن‌سازی اندپوینت خروجی بیمار (اعمال شد)
- بازگرداندن دادهٔ واقعی encounters/labs/medications/ai_summaries با کنترل دسترسی و پاسخ ساخت‌یافته.

3) امن‌سازی نسخه‌بندی و کنترل دسترسی (اعمال شد)
- الزام احراز هویت در `/versions/*` و بررسی مالکیت منبع قبل از لیست/بازگردانی.

4) کنترل سرعت درخواست‌ها (اعمال شد)
- افزودن throttling سطح کاربر و scoped برای `ai` و `export`.

5) داشبورد روند HbA1c و شاخص‌ها (پیشنهاد)
- افزودن endpoint روند HbA1c با آستانه‌های هشدار و خلاصهٔ آماری برای هر بیمار.

6) وبهوک رویداد نسخه‌بندی (پیشنهاد)
- ارسال وبهوک امضاشده (HMAC) با retry/backoff روی ایجاد نسخه/بازگردانی.

7) بهبود پایداری AI (پیشنهاد)
- ذخیرهٔ متادیتای provider/پارامترها، لاگ ساخت‌یافته و fallback بین GapGPT/OpenAI.

8) تست‌های مالکیت و مجوز (پیشنهاد)
- افزودن تست‌های منفی/مثبت برای اطمینان از عدم نشت داده بین پزشکان.

9) هم‌راستاسازی OpenAPI با مسیرهای واقعی (پیشنهاد)
- به‌روزرسانی `OpenAPI.yml` برای health/token/export و اکشن‌های AI با نمونه‌های دقیق.

10) ردیابی منبع تغییر در نسخه‌بندی (پیشنهاد)
- ثبت شفاف‌تر عامل تغییر در `meta` و پشتیبانی از فیلتر در API.