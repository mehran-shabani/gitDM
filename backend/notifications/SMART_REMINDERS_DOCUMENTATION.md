# سیستم یادآوری هوشمند GitDM

## خلاصه اجرایی

سیستم یادآوری هوشمند GitDM یک راه‌حل جامع برای مدیریت یادآورهای پزشکی است که با استفاده از تحلیل رفتاری و یادگیری ماشین، یادآورهای شخصی‌سازی شده برای بیماران دیابتی ارائه می‌دهد.

## ویژگی‌های کلیدی

### 1. یادآوری‌های شخصی‌سازی شده
- یادآوری مصرف دارو با زمان‌بندی هوشمند
- یادآوری آزمایشات دوره‌ای (HbA1c، قند خون)
- یادآوری ویزیت‌های پزشکی
- یادآوری ورزش و رژیم غذایی
- یادآوری چک قند خون

### 2. تحلیل رفتاری پیشرفته
- شناسایی بهترین زمان‌های یادآوری برای هر بیمار
- تحلیل نرخ تبعیت از درمان
- پیش‌بینی احتمال پاسخ به یادآوری
- یادگیری از الگوهای رفتاری بیمار

### 3. زمان‌بندی هوشمند و تطبیقی
- تنظیم خودکار زمان یادآوری بر اساس پاسخ‌های قبلی
- پشتیبانی از انواع تکرار (روزانه، هفتگی، ماهانه)
- زمان‌بندی چندگانه در روز
- تنظیمات سفارشی برای روزهای هفته

### 4. مدیریت جامع پاسخ‌ها
- ثبت پاسخ بیمار به یادآورها
- اندازه‌گیری رضایت از یادآوری
- ثبت نوع اقدام انجام شده
- تحلیل زمان پاسخ

## معماری سیستم

### مدل‌های داده

#### SmartReminder
مدل اصلی برای ذخیره یادآورها:
- اطلاعات پایه (عنوان، توضیحات، نوع)
- زمان‌بندی (تاریخ شروع/پایان، فرکانس، تعداد در روز)
- تنظیمات (اولویت، بحرانی بودن، قابلیت تطبیق)
- ارتباط با منابع (دارو، آزمایش)

#### ReminderPattern
الگوهای رفتاری بیمار:
- بهترین و بدترین زمان‌های پاسخ
- آمار پاسخ‌دهی
- نرخ تبعیت
- کانال ارتباطی ترجیحی

#### ReminderSchedule
برنامه‌ریزی و زمان‌بندی:
- زمان دقیق یادآوری
- وضعیت ارسال و تایید
- تعداد تلاش‌ها
- اقدام انجام شده

#### ReminderResponse
پاسخ‌های بیمار:
- نوع پاسخ (فوری، با تاخیر، بدون پاسخ)
- زمان و تاخیر پاسخ
- نتیجه اقدام
- بازخورد و رضایت

### سرویس‌ها

#### BehaviorAnalysisService
- تحلیل رفتار بیمار
- محاسبه بهترین زمان‌ها
- دریافت ترجیحات
- تولید توصیه‌ها

#### SmartSchedulerService
- ایجاد برنامه‌های زمان‌بندی
- محاسبه زمان بهینه
- تنظیم بر اساس بازخورد
- پشتیبانی از انواع فرکانس

#### ReminderDeliveryService
- پردازش یادآورهای در انتظار
- ارسال نوتیفیکیشن
- مدیریت پاسخ‌ها
- بروزرسانی الگوهای رفتاری

#### AdaptiveLearningService
- بهینه‌سازی زمان‌بندی
- تولید بینش‌ها
- پیش‌بینی بهترین زمان
- یادگیری مستمر

## API Endpoints

### یادآورهای هوشمند
- `GET /api/smart-reminders/` - لیست یادآورها
- `POST /api/smart-reminders/` - ایجاد یادآوری جدید
- `GET /api/smart-reminders/{id}/` - جزئیات یادآوری
- `PUT /api/smart-reminders/{id}/` - ویرایش یادآوری
- `DELETE /api/smart-reminders/{id}/` - حذف یادآوری
- `POST /api/smart-reminders/{id}/pause/` - توقف یادآوری
- `POST /api/smart-reminders/{id}/resume/` - از سرگیری یادآوری
- `POST /api/smart-reminders/{id}/complete/` - تکمیل یادآوری
- `GET /api/smart-reminders/{id}/statistics/` - آمار یادآوری
- `GET /api/smart-reminders/{id}/upcoming_schedules/` - برنامه‌های آینده

### الگوهای رفتاری
- `GET /api/reminder-patterns/` - لیست الگوها
- `GET /api/reminder-patterns/{id}/` - جزئیات الگو
- `GET /api/reminder-patterns/patient_analysis/` - تحلیل کامل بیمار

### برنامه‌های زمان‌بندی
- `GET /api/reminder-schedules/` - لیست برنامه‌ها
- `POST /api/reminder-schedules/{id}/acknowledge/` - تایید یادآوری
- `POST /api/reminder-schedules/{id}/reschedule/` - تغییر زمان

### پاسخ‌های یادآوری
- `GET /api/reminder-responses/` - لیست پاسخ‌ها
- `POST /api/reminder-responses/` - ثبت پاسخ جدید
- `GET /api/reminder-responses/satisfaction_summary/` - خلاصه رضایت

### سرویس‌های پشتیبانی
- `POST /api/reminder-services/process_reminders/` - پردازش یادآورها
- `POST /api/reminder-services/optimize_timing/` - بهینه‌سازی زمان‌بندی
- `GET /api/reminder-services/predict_best_time/` - پیش‌بینی بهترین زمان

## نحوه استفاده

### 1. ایجاد یادآوری جدید

```python
POST /api/smart-reminders/
{
    "patient": "patient_id",
    "reminder_type": "MEDICATION",
    "title": "مصرف متفورمین",
    "description": "قرص متفورمین 500 میلی‌گرم",
    "start_date": "2024-01-01",
    "end_date": "2024-03-01",
    "frequency": "DAILY",
    "times_per_day": 2,
    "preferred_times": ["08:00", "20:00"],
    "priority": 8,
    "is_critical": true,
    "is_adaptive": true
}
```

### 2. ثبت پاسخ به یادآوری

```python
POST /api/reminder-schedules/{schedule_id}/acknowledge/
{
    "action_taken": "COMPLETED",
    "notes": "دارو مصرف شد",
    "response_details": {
        "action_result": "TAKEN",
        "feedback": "به موقع مصرف شد",
        "satisfaction_score": 5,
        "device_type": "mobile"
    }
}
```

### 3. تحلیل رفتار بیمار

```python
GET /api/reminder-patterns/patient_analysis/?patient_id={patient_id}

Response:
{
    "notification_channels": {
        "MEDICATION": "IN_APP",
        "LAB_TEST": "SMS"
    },
    "best_times_by_type": {
        "MEDICATION": [8, 12, 20],
        "LAB_TEST": [9]
    },
    "compliance_by_type": {
        "MEDICATION": 85.5,
        "LAB_TEST": 92.0
    },
    "insights": [
        {
            "type": "optimal_timing",
            "severity": "info",
            "message": "بهترین زمان برای یادآوری دارو ساعت 8 صبح است",
            "suggestion": "زمان یادآوری را به 8 صبح تغییر دهید"
        }
    ]
}
```

## تنظیمات و پیکربندی

### فعال‌سازی پردازش خودکار یادآورها

برای پردازش خودکار یادآورها، یک Cron Job تنظیم کنید:

```bash
# هر 5 دقیقه یک بار
*/5 * * * * curl -X POST http://localhost:8000/api/reminder-services/process_reminders/
```

### تنظیمات محیطی

```env
# تنظیمات یادآوری
REMINDER_PROCESSING_INTERVAL=5  # دقیقه
REMINDER_MAX_ATTEMPTS=3
REMINDER_WINDOW_MINUTES=10
ADAPTIVE_LEARNING_ENABLED=true
```

## نمونه‌های کاربردی

### سناریو 1: یادآوری مصرف انسولین
بیمار دیابتی نوع 1 که نیاز به تزریق انسولین 3 بار در روز دارد:
- یادآوری قبل از هر وعده غذایی
- تنظیم خودکار زمان بر اساس عادات غذایی
- هشدار بحرانی در صورت عدم تزریق

### سناریو 2: یادآوری آزمایش HbA1c
بیمار دیابتی نوع 2 که نیاز به آزمایش سه ماهه دارد:
- یادآوری 1 هفته قبل از موعد
- یادآوری در روز آزمایش
- پیگیری دریافت نتایج

### سناریو 3: برنامه ورزش منظم
بیمار با توصیه ورزش 3 روز در هفته:
- یادآوری در روزهای مشخص (دوشنبه، چهارشنبه، شنبه)
- تنظیم زمان بر اساس ترجیح بیمار (صبح یا عصر)
- ثبت میزان فعالیت

## مزایای سیستم

1. **افزایش تبعیت از درمان**: با یادآوری‌های به موقع و شخصی‌سازی شده
2. **کاهش عوارض**: با اطمینان از مصرف منظم دارو و انجام آزمایشات
3. **بهبود کیفیت زندگی**: با کاهش استرس ناشی از فراموشی
4. **صرفه‌جویی در هزینه**: با کاهش بستری‌های ناشی از عدم کنترل قند
5. **داده‌های ارزشمند**: برای تحقیقات و بهبود درمان

## امنیت و حریم خصوصی

- رمزنگاری داده‌های حساس
- دسترسی محدود بر اساس نقش (پزشک/بیمار)
- ثبت تمام فعالیت‌ها در Audit Log
- حذف خودکار داده‌های قدیمی

## توسعه‌های آینده

1. **پشتیبانی از دستگاه‌های IoT**: دریافت خودکار از گلوکومتر
2. **یادآوری‌های صوتی**: برای بیماران مسن یا کم‌بینا
3. **هوش مصنوعی پیشرفته**: پیش‌بینی نیاز به تغییر دوز دارو
4. **ادغام با تقویم**: همگام‌سازی با Google Calendar
5. **گزارش‌های تحلیلی**: داشبورد مدیریتی برای پزشکان

## نتیجه‌گیری

سیستم یادآوری هوشمند GitDM با ترکیب تکنولوژی‌های مدرن و درک عمیق از نیازهای بیماران دیابتی، راه‌حلی جامع برای بهبود مدیریت درمان ارائه می‌دهد. این سیستم نه تنها یادآورهای ساده ارسال می‌کند، بلکه با یادگیری از رفتار هر بیمار، تجربه‌ای شخصی‌سازی شده و موثر ایجاد می‌کند.